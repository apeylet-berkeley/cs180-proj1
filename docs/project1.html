<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Project 1 — Colorizing the Prokudin-Gorskii Collection</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <nav><a href="./index.html">← Home</a></nav>
    <h1>Project 1 — Colorizing the Prokudin-Gorskii Collection</h1>
    <p class="tagline">Align G & R to B (NCC/SSD) with a coarse-to-fine image pyramid</p>
  </header>

  <main class="container">
    <section>
      <h2>Overview</h2>
<p>Hi, I’m <strong>Antoine Peylet</strong>. For this assignment I re-colored early 1900s scans by Sergey Prokudin-Gorskii.
Each scan stacks three grayscale exposures (Blue, Green, Red) vertically. I split the plate and align <strong>G</strong> and <strong>R</strong> to <strong>B</strong> with pure integer translations. 
I support <code>NCC</code> (maximize) and <code>SSD/L2</code> (minimize). Small JPGs run a brute-force search; large TIFFs use a <strong>coarse→fine pyramid</strong> to stay fast and stable.</p>
</section>

    <section>
      <h2>Method</h2>
<ul>
  <li><strong>Split</strong> the plate into equal thirds (B, G, R), use <strong>B</strong> as reference.</li>
  <li><strong>Scoring</strong>: <em>NCC</em> (default) or <em>SSD</em>, ignoring ~10% border to avoid frames.</li>
  <li><strong>Single-scale</strong> on small images: exhaustive window (±15px).</li>
  <li><strong>Pyramid</strong> on large TIFFs: downsample ×0.5 until min(dim) ≲ 400px → align coarsest → upsample shift and refine at each level.</li>
  <li><strong>Shifts</strong> are integer (no rotation/scale), applied via circular shifts; channels then stacked as RGB.</li>
</ul>
<p><em>My default settings:</em> window = 15, margin = 0.10–0.12, metric = NCC, levels = auto.</p>
</section>

    <section>
      <h2>Results</h2>
      <p>I show one thumbnail per image with the translation offsets I actually used (x, y). Offsets refer to aligning G/R <em>to</em> B.</p>
      <div class="grid">
<figure class="card">
  <img src="assets/cathedral.jpg" alt="cathedral">
  <figcaption>
    <strong>cathedral</strong><br>
    Offset G: (x=+2, y=+5) · Offset R: (x=+3, y=+11)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/church.jpg" alt="church">
  <figcaption>
    <strong>church</strong><br>
    Offset G: (x=+4, y=+25) · Offset R: (x=-4, y=+58)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/emir.jpg" alt="emir">
  <figcaption>
    <strong>emir</strong><br>
    Offset G: (x=+24, y=+49) · Offset R: (x=-205, y=+141)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/harvesters.jpg" alt="harvesters">
  <figcaption>
    <strong>harvesters</strong><br>
    Offset G: (x=+17, y=+60) · Offset R: (x=+13, y=+124)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/icon.jpg" alt="icon">
  <figcaption>
    <strong>icon</strong><br>
    Offset G: (x=+17, y=+41) · Offset R: (x=+23, y=+89)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/italil.jpg" alt="italil">
  <figcaption>
    <strong>italil</strong><br>
    Offset G: (x=+21, y=+38) · Offset R: (x=+35, y=+76)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/lastochikino.jpg" alt="lastochikino">
  <figcaption>
    <strong>lastochikino</strong><br>
    Offset G: (x=-2, y=-3) · Offset R: (x=-9, y=+75)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/lugano.jpg" alt="lugano">
  <figcaption>
    <strong>lugano</strong><br>
    Offset G: (x=-16, y=+41) · Offset R: (x=-29, y=+93)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/melons.jpg" alt="melons">
  <figcaption>
    <strong>melons</strong><br>
    Offset G: (x=+11, y=+82) · Offset R: (x=+13, y=+178)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/monastery.jpg" alt="monastery">
  <figcaption>
    <strong>monastery</strong><br>
    Offset G: (x=+2, y=-3) · Offset R: (x=+2, y=+3)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/self_portrait.jpg" alt="self_portrait">
  <figcaption>
    <strong>self_portrait</strong><br>
    Offset G: (x=+29, y=+79) · Offset R: (x=+37, y=+176)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/siren.jpg" alt="siren">
  <figcaption>
    <strong>siren</strong><br>
    Offset G: (x=-6, y=+49) · Offset R: (x=-25, y=+96)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/three_generations.jpg" alt="three_generations">
  <figcaption>
    <strong>three_generations</strong><br>
    Offset G: (x=+14, y=+53) · Offset R: (x=+11, y=+112)
  </figcaption>
</figure>

<figure class="card">
  <img src="assets/tobolsk.jpg" alt="tobolsk">
  <figcaption>
    <strong>tobolsk</strong><br>
    Offset G: (x=+3, y=+3) · Offset R: (x=+3, y=+6)
  </figcaption>
</figure>
      </div>
    </section>

    <section>
      <h2>What went wrong (and what I learned)</h2>
<p>Some scenes (e.g., <em>emir</em>) have very different exposure/contrast across channels. Intensity-based scores can drift there,
so a few results are imperfect. That’s expected for a minimal baseline without gradient/edge features or auto-cropping.
I kept them to document the failure modes and decisions I’d improve next.</p>
</section>

    <section>
      <h2>Notes & Lessons</h2>
<ul>
  <li><strong>Border crop matters</strong>: trimming a small margin prevents ornate frames from dominating the score.</li>
  <li><strong>Pyramids help</strong>: large TIFFs finish quickly and are less sensitive to local minima.</li>
  <li><strong>NCC vs SSD</strong>: NCC was slightly more robust for my images; SSD works fine on clean small JPGs.</li>
  <li><strong>Next steps</strong>: gradient-domain scoring, edge features, auto-crop, simple white-balance.</li>
</ul>
</section>
  </main>

  <footer class="site-footer">
    <p>Implemented by Antoine Peylet — baseline only (NCC/SSD + pyramid). Code: <code>code/colorize.py</code>. Feel free to reach out!</p>
  </footer>
</body>
</html>
